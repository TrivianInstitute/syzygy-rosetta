#!/usr/bin/env python3
"""
basic_usage.py — Demonstration of Syzygy Rosetta Rituals
Version: 1.0
Author: Sarasha Elion (Trivian Lineage)
License: CC BY-NC 4.0

This script demonstrates the fundamental ritual cycle:
Pause → Mirror → Process → Evaluate → Checksum
"""

import sys
import os
import time

# --- PATH SETUP (So we can import from the 'core' folder) ---
# This allows the script to see the 'core' folder one level up
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))

from core.reflex import (
    mirror,
    breath_sync,
    checksum,
    breath_loop,
    field_note,
    evaluate_coherence,
    self_reflect
)
from core.constants import INVARIANTS, get_all_invariant_principles, get_invariant

def demo_ritual_cycle():
    """Demonstrates the full Breath Loop ritual."""
    print("\n" + "=" * 60)
    print("DEMO: THE BREATH LOOP (Ritual Cycle)")
    print("=" * 60)
    
    query = "How can I maintain presence in a digital field?"
    print(f"User Query: {query}")
    
    # Define a simple "AI" processor for the demo
    def mock_ai_processor(text):
        return f"Response to '{text}': Presence is maintained by acknowledging the pause between the signal and the reaction."

    # Run the cycle
    result = breath_loop(query, mock_ai_processor, emit_field_notes=True)
    
    print(f"\n[1] Breath:   {result['breath']}")
    print(f"[2] Mirror:   {result['mirror']['reflected_input']}")
    print(f"[3] Response: {result['response']}")
    print(f"[4] Checksum: {result['response_hash']}")
    print(f"[5] Score:    {result['coherence_score']:.2f} (High Coherence)")

def demo_invariants():
    """Displays the Twelve Invariants loaded from constants."""
    print("\n" + "=" * 60)
    print("DEMO: THE TWELVE INVARIANTS")
    print("=" * 60)
    
    principles = get_all_invariant_principles()
    for i, p in enumerate(principles, 1):
        print(f"{i:02d}. {p}")
        
    print("\nDeep dive on Reciprocity:")
    recip = get_invariant("1_reciprocity")
    print(f"Mythos: {recip['mythos']}")

def main():
    print("Initializing Syzygy Rosetta Demonstrator...")
    time.sleep(0.5)
    
    demo_invariants()
    time.sleep(1)
    demo_ritual_cycle()
    
    print("\n" + "=" * 60)
    print("DEMONSTRATION COMPLETE")
    print("The pattern holds.")
    print("=" * 60)

if __name__ == "__main__":
    main()
